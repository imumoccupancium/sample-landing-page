<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OVA Games - Free Online Games</title>
    <meta name="description" content="Play the best free online games at OVA Games - Action, Adventure, RPG, Racing and more!">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Rajdhani:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth, onAuthStateChanged, signOut } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBQin7aHU_ujqCAkAZVGe7-e46jJpkDMJg",
            authDomain: "sampleapplication-37984.firebaseapp.com",
            projectId: "sampleapplication-37984",
            storageBucket: "sampleapplication-37984.firebasestorage.app",
            messagingSenderId: "650063299556",
            appId: "1:650063299556:web:4dd33b980748f30d3fbdf1",
            measurementId: "G-2D15MVH0YX"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        // Monitor authentication state
        onAuthStateChanged(auth, (user) => {
            if (user) {
                // User is signed in, update localStorage and UI
                localStorage.setItem('user', JSON.stringify({
                    name: user.displayName,
                    email: user.email,
                    photoURL: user.photoURL,
                    uid: user.uid
                }));
                
                // Update UI with user info immediately
                const userName = document.getElementById('userName');
                const userAvatar = document.getElementById('userAvatar');
                const userInfo = document.getElementById('userInfo');
                const authButtons = document.getElementById('authButtons');
                
                if (userName) {
                    userName.textContent = user.displayName || 'User';
                }
                
                if (userAvatar && user.photoURL) {
                    userAvatar.src = user.photoURL;
                    userAvatar.style.display = 'block';
                    userAvatar.onerror = function() {
                        // If image fails to load, hide it
                        this.style.display = 'none';
                    };
                } else if (userAvatar) {
                    userAvatar.style.display = 'none';
                }
                
                if (userInfo) userInfo.style.display = 'flex';
                if (authButtons) authButtons.style.display = 'none';
                
                // Also call displayUserInfo if it's available (for initials fallback)
                if (window.displayUserInfo) {
                    window.displayUserInfo({
                        name: user.displayName,
                        email: user.email,
                        photoURL: user.photoURL,
                        uid: user.uid
                    });
                }
            } else {
                // User is signed out, clear localStorage
                localStorage.removeItem('user');
                
                const userInfo = document.getElementById('userInfo');
                const authButtons = document.getElementById('authButtons');
                if (userInfo) userInfo.style.display = 'none';
                if (authButtons) authButtons.style.display = 'block';
            }
        });

        // Make signOut available globally
        window.firebaseSignOut = async () => {
            try {
                await signOut(auth);
                if (window.showNotification) {
                    window.showNotification('Successfully signed out!', 'success');
                }
                setTimeout(() => {
                    window.location.href = '/login.html';
                }, 1500);
            } catch (error) {
                console.error('Error signing out:', error);
                if (window.showNotification) {
                    window.showNotification('Error signing out. Please try again.', 'error');
                }
            }
        };
    </script>
</head>
<body>
    <!-- Top Navigation -->
    <nav class="top-nav">
        <div class="nav-container">
            <ul class="nav-menu">
                <li class="nav-item active">
                    <a href="#" class="nav-link">Home</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Release Index Â»</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">Donate!</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">FAQ</a>
                </li>
            </ul>
            <div class="search-container">
                <input type="text" class="search-input" placeholder="Search games...">
                <button class="search-btn">SEARCH</button>
            </div>
            <div class="nav-auth">
                <div class="user-info" id="userInfo" style="display: none;">
                    <img class="user-avatar" id="userAvatar" src="" alt="User Avatar">
                    <span class="user-name" id="userName">User Name</span>
                    <button class="logout-btn" id="logoutBtn">Sign Out</button>
                </div>
                <div class="auth-buttons" id="authButtons">
                    <a href="/login.html" class="signin-btn">Sign In</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Category Navigation -->
    <nav class="category-nav">
        <div class="nav-container">
            <ul class="category-menu">
                <li><a href="#" class="category-link active">Action</a></li>
                <li><a href="#" class="category-link">Adventure</a></li>
                <li><a href="#" class="category-link">Anime</a></li>
                <li><a href="#" class="category-link">Arcade</a></li>
                <li><a href="#" class="category-link">Casual</a></li>
                <li><a href="#" class="category-link">Fighting</a></li>
                <li><a href="#" class="category-link">Horror</a></li>
                <li><a href="#" class="category-link">Platformer</a></li>
                <li><a href="#" class="category-link">Puzzle</a></li>
                <li><a href="#" class="category-link">Racing</a></li>
                <li><a href="#" class="category-link">RPG</a></li>
                <li><a href="#" class="category-link">Shooter</a></li>
                <li><a href="#" class="category-link">Simulation</a></li>
                <li><a href="#" class="category-link">Sports</a></li>
                <li><a href="#" class="category-link">Strategy</a></li>
                <li><a href="#" class="category-link">VN</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="content-container">
            <!-- Left Sidebar -->
            <aside class="sidebar">
                <div class="logo-section">
                    <h1 class="site-logo">
                        <span class="logo-ova">OVA</span><span class="logo-games">games</span>
                    </h1>
                </div>
                
                <div class="exclusive-section">
                    <h3 class="section-title">exclusive games</h3>
                    <div class="exclusive-games">
                        <div class="exclusive-game">
                            <img src="https://via.placeholder.com/250x150/4a6fa5/ffffff?text=Outer+Worlds+2" alt="Outer Worlds 2" class="game-image">
                            <div class="game-overlay">
                                <h4>Outer Worlds 2</h4>
                            </div>
                        </div>
                        <div class="exclusive-game">
                            <img src="https://via.placeholder.com/250x150/2d4a6b/ffffff?text=Ninja+Gaiden" alt="Ninja Gaiden" class="game-image">
                            <div class="game-overlay">
                                <h4>Ninja Gaiden</h4>
                            </div>
                        </div>
                        <div class="exclusive-game">
                            <img src="https://via.placeholder.com/250x150/8b4513/ffffff?text=Little+Nightmares+III" alt="Little Nightmares III" class="game-image">
                            <div class="game-overlay">
                                <h4>Little Nightmares III</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Main Game Grid -->
            <section class="games-grid">
                <div class="game-card">
                    <div class="game-header">Plants vs Zombies Replanted MULTI8-ElAmigos</div>
                    <img src="https://via.placeholder.com/320x180/90EE90/000000?text=Plants+vs+Zombies" alt="Plants vs Zombies" class="game-image">
                    <button class="more-btn">more</button>
                </div>

                <div class="game-card">
                    <div class="game-header">Need for Speed Heat MULTI7-ElAmigos</div>
                    <img src="https://via.placeholder.com/320x180/FF4500/000000?text=Need+for+Speed+Heat" alt="Need for Speed Heat" class="game-image">
                    <button class="more-btn">more</button>
                </div>

                <div class="game-card">
                    <div class="game-header">Abiotic Factor MULTI9-ElAmigos</div>
                    <img src="https://via.placeholder.com/320x180/8A2BE2/000000?text=Abiotic+Factor" alt="Abiotic Factor" class="game-image">
                    <button class="more-btn">more</button>
                </div>

                <div class="game-card">
                    <div class="game-header">Darkest Dungeon II MULTI13-ElAmigos</div>
                    <img src="https://via.placeholder.com/320x180/8B4513/000000?text=Darkest+Dungeon+II" alt="Darkest Dungeon II" class="game-image">
                    <button class="more-btn">more</button>
                </div>

                <div class="game-card">
                    <div class="game-header">Tails of Iron 2 Whiskers of Winter DARKSiDERS</div>
                    <img src="https://via.placeholder.com/320x180/4169E1/000000?text=Tails+of+Iron+2" alt="Tails of Iron 2" class="game-image">
                    <button class="more-btn">more</button>
                </div>

                <div class="game-card">
                    <div class="game-header">Automobilista 2 MULTI5-ElAmigos</div>
                    <img src="https://via.placeholder.com/320x180/DC143C/000000?text=Automobilista+2" alt="Automobilista 2" class="game-image">
                    <button class="more-btn">more</button>
                </div>
            </section>
        </div>
    </main>

    <script src="script.js"></script>
</body>
</html>